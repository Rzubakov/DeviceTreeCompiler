<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets">
    <ui:composition template="/layouts/home.xhtml">
        <ui:define name="title">Каналы</ui:define> 
        <ui:define name="content">
            <h:form id="form">

                <div class="ui-g-12 ui-md-3 ui-lg-3">
                    <p:dataTable var="controller" value="#{chanelsBean.controllers}"  selectionMode="single" selection="#{chanelsBean.selectedController}" rowKey="#{controller.id}">
                        <p:ajax event="rowSelect"  update="form:modules" />
                        <f:facet name="header">Контроллеры</f:facet>
                        <p:column headerText="Наименование">
                            <h:outputText value="#{controller.id}:#{controller.name}" />
                        </p:column>
                    </p:dataTable> 
                    <p:separator />
                    <p:dataTable id="modules" var="module" value="#{chanelsBean.selectedController.modules}"  selectionMode="single" selection="#{chanelsBean.selectedModule}" rowKey="#{module.id}">
                        <p:ajax event="rowSelect" />
                        <f:facet name="header">Модули</f:facet>
                        <p:column headerText="Наименование">
                            <h:outputText value="#{module.index}:#{module.name}" />
                        </p:column>
                    </p:dataTable>                   
                </div>



                <div class="ui-g-12 ui-md-9 ui-lg-9">
                    <p:dataTable id="chanels" var="chanel" value="#{chanelsBean.selectedModule.chanels}"   rowKey="#{chanel}">
                        <p:ajax event="rowSelect" />
                        <f:facet name="header">Каналы модуля</f:facet>
                        <p:column headerText="type">
                            <h:outputText value="#{chanel.type}" />
                        </p:column>
                        <f:facet name="footer">
                            <p:commandButton  update="chanels" value="AI"   actionListener="#{chanelsBean.addChanel('AI')}" />
                            <p:commandButton  update="chanels" value="SDI"  actionListener="#{chanelsBean.addChanel('SDI')}" />
                            <p:commandButton  update="chanels" value="DDI"  actionListener="#{chanelsBean.addChanel('DDI')}" />
                            <p:commandButton  update="chanels" value="SDO"  actionListener="#{chanelsBean.addChanel('SDO')}" />
                            <p:commandButton  update="chanels" value="DDO"  actionListener="#{chanelsBean.addChanel('DDO')}" />
                        </f:facet>                   
                    </p:dataTable>   
                </div> 

            </h:form> 

        </ui:define> 
    </ui:composition>    
</html>    
